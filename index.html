<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>英語学習サイト (プロトタイプ)</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- SF Pro Display (Apple公式フォント) -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=SF+Pro+Display:400,700&display=swap">
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-100">
    <!-- ヘッダー -->
    <header class="apple-header px-6 py-6 mb-8">
        <div class="container mx-auto flex flex-col items-start">
            <h1 class="apple-title">English Learning Hub</h1>
            <p class="apple-sub mt-2">英文法の基礎から学ぼう</p>
        </div>
    </header>

    <!-- メインコンテンツ -->
    <main class="container mx-auto px-6 py-8">
        
        <div class="max-w-4xl mx-auto">
            <!-- サイト紹介 -->
            <div class="apple-card mb-8">
                <h2 class="apple-card-title">このサイトについて</h2>
                <p class="apple-card-text">
                    このウェブサイトは、英語の基礎となる英文法を学ぶためのリソースです。<br>
                    各単元の解説を読み、練習問題に挑戦して理解を深めていきましょう。<br>
                    まずは下の「品詞」から始めてみてください。
                </p>
            </div>

            <!-- ナビゲーションボタン -->
            <div class="apple-card mb-8">
                <h2 class="apple-card-title">文法セクションへ移動</h2>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <button onclick="location.href='#partsofspeech'" class="apple-nav-btn">品詞</button>
                    <button onclick="location.href='#sentencepattern'" class="apple-nav-btn">文型</button>
                    <button onclick="location.href='#phrase'" class="apple-nav-btn">句</button>
                    <button onclick="location.href='#clause'" class="apple-nav-btn">節</button>
                    <button onclick="location.href='#tense'" class="apple-nav-btn">時制</button>
                    <button onclick="location.href='#modal'" class="apple-nav-btn">助動詞</button>
                    <button onclick="location.href='#subjunctive'" class="apple-nav-btn">仮定法</button>
                    <button onclick="location.href='#comparison'" class="apple-nav-btn">比較</button>
                </div>
            </div>

            <!-- 品詞 -->
            <section id="partsofspeech" class="apple-card mb-8">
                <h2 class="apple-card-title">品詞</h2>
                <div class="prose max-w-none">
                    <h3 class="apple-section-title">名詞</h3>
                    <p class="apple-section-text" id="desc-noun"></p>
                    
                    <!-- AI生成問題セクション -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generateNounQuestion" class="apple-ai-btn">
                                新しい問題を生成
                            </button>
                        </div>
                        
                        <div id="aiQuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiQuestionText" class="apple-question-text"></p>
                                <div id="aiOptionsContainer" class="apple-options-grid">
                                    <!-- AI生成の選択肢がここに表示されます -->
                                </div>
                                <div id="aiFeedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        
                        <div id="loadingIndicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>

                    <h3 class="apple-section-title">冠詞</h3>
                    <p id="desc-article"></p>
                    
                    <!-- AI生成問題セクション -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generateArticleQuestion" class="apple-ai-btn">
                                新しい問題を生成
                            </button>
                        </div>
                        
                        <div id="aiArticleQuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiArticleQuestionText" class="apple-question-text"></p>
                                <div id="aiArticleOptionsContainer" class="apple-options-grid">
                                    <!-- AI生成の選択肢がここに表示されます -->
                                </div>
                                <div id="aiArticleFeedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        
                        <div id="loadingArticleIndicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>

                    <h3 class="apple-section-title">be動詞</h3>
                    <p id="desc-be_verb"></p>
                    
                    <!-- AI生成問題セクション -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generateBeVerbQuestion" class="apple-ai-btn">
                                新しい問題を生成
                            </button>
                        </div>
                        
                        <div id="aiBeVerbQuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiBeVerbQuestionText" class="apple-question-text"></p>
                                <div id="aiBeVerbOptionsContainer" class="apple-options-grid">
                                    <!-- AI生成の選択肢がここに表示されます -->
                                </div>
                                <div id="aiBeVerbFeedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        
                        <div id="loadingBeVerbIndicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>

                    <h3 class="apple-section-title">一般動詞</h3>
                    <p id="desc-verb"></p>
                    
                    <!-- AI生成問題セクション -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generateVerbQuestion" class="apple-ai-btn">
                                新しい問題を生成
                            </button>
                        </div>
                        
                        <div id="aiVerbQuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiVerbQuestionText" class="apple-question-text"></p>
                                <div id="aiVerbOptionsContainer" class="apple-options-grid">
                                    <!-- AI生成の選択肢がここに表示されます -->
                                </div>
                                <div id="aiVerbFeedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        
                        <div id="loadingVerbIndicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>

                    <h3 class="apple-section-title">形容詞</h3>
                    <p id="desc-adjective"></p>
                    
                    <!-- AI生成問題セクション -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generateAdjectiveQuestion" class="apple-ai-btn">
                                新しい問題を生成
                            </button>
                        </div>
                        
                        <div id="aiAdjectiveQuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiAdjectiveQuestionText" class="apple-question-text"></p>
                                <div id="aiAdjectiveOptionsContainer" class="apple-options-grid">
                                    <!-- AI生成の選択肢がここに表示されます -->
                                </div>
                                <div id="aiAdjectiveFeedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        
                        <div id="loadingAdjectiveIndicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>

                    <h3 class="apple-section-title">副詞</h3>
                    <p id="desc-adverb"></p>
                    
                    <!-- AI生成問題セクション -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generateAdverbQuestion" class="apple-ai-btn">
                                新しい問題を生成
                            </button>
                        </div>
                        
                        <div id="aiAdverbQuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiAdverbQuestionText" class="apple-question-text"></p>
                                <div id="aiAdverbOptionsContainer" class="apple-options-grid">
                                    <!-- AI生成の選択肢がここに表示されます -->
                                </div>
                                <div id="aiAdverbFeedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        
                        <div id="loadingAdverbIndicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>

                    <h3 class="apple-section-title">前置詞</h3>
                    <p id="desc-preposition"></p>
                    
                    <!-- AI生成問題セクション -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generatePrepositionQuestion" class="apple-ai-btn">
                                新しい問題を生成
                            </button>
                        </div>
                        
                        <div id="aiPrepositionQuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiPrepositionQuestionText" class="apple-question-text"></p>
                                <div id="aiPrepositionOptionsContainer" class="apple-options-grid">
                                    <!-- AI生成の選択肢がここに表示されます -->
                                </div>
                                <div id="aiPrepositionFeedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        
                        <div id="loadingPrepositionIndicator" class="hidden text-center py-4">
                            <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
                            <p class="mt-2 text-gray-600">問題を生成中...</p>
                        </div>
                    </div>

                    <h3 class="apple-section-title">接続詞</h3>
                    <p id="desc-conjunction"></p>
                    
                    <!-- AI生成問題セクション -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generateConjunctionQuestion" class="apple-ai-btn">
                                新しい問題を生成
                            </button>
                        </div>
                        <div id="aiConjunctionQuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiConjunctionQuestionText" class="apple-question-text"></p>
                                <div id="aiConjunctionOptionsContainer" class="apple-options-grid">
                                    <!-- AI生成の選択肢がここに表示されます -->
                                </div>
                                <div id="aiConjunctionFeedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        <div id="loadingConjunctionIndicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 文型 -->
            <section id="sentencepattern" class="apple-card mb-8">
                <h2 class="apple-card-title">文型</h2>
                <div class="prose max-w-none">
                    <h3 class="apple-section-title">第1文型（S+V）</h3>
                    <p class="apple-section-text" id="desc-pattern1"></p>
                    
                    <!-- AI生成問題セクション -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generatePattern1Question" class="apple-ai-btn">
                                新しい問題を生成
                            </button>
                        </div>
                        
                        <div id="aiPattern1QuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiPattern1QuestionText" class="apple-question-text"></p>
                                <div id="aiPattern1OptionsContainer" class="apple-options-grid">
                                    <!-- AI生成の選択肢がここに表示されます -->
                                </div>
                                <div id="aiPattern1Feedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        
                        <div id="loadingPattern1Indicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>

                    <h3 class="apple-section-title">第2文型（S+V+C）</h3>
                    <p class="apple-section-text" id="desc-pattern2"></p>
                    
                    <!-- AI生成問題セクション -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generatePattern2Question" class="apple-ai-btn">
                                新しい問題を生成
                            </button>
                        </div>
                        
                        <div id="aiPattern2QuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiPattern2QuestionText" class="apple-question-text"></p>
                                <div id="aiPattern2OptionsContainer" class="apple-options-grid">
                                    <!-- AI生成の選択肢がここに表示されます -->
                                </div>
                                <div id="aiPattern2Feedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        
                        <div id="loadingPattern2Indicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>

                    <h3 class="apple-section-title">第3文型（S+V+O）</h3>
                    <p class="apple-section-text" id="desc-pattern3"></p>
                    
                    <!-- AI生成問題セクション -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generatePattern3Question" class="apple-ai-btn">
                                新しい問題を生成
                            </button>
                        </div>
                        
                        <div id="aiPattern3QuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiPattern3QuestionText" class="apple-question-text"></p>
                                <div id="aiPattern3OptionsContainer" class="apple-options-grid">
                                    <!-- AI生成の選択肢がここに表示されます -->
                                </div>
                                <div id="aiPattern3Feedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        
                        <div id="loadingPattern3Indicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>

                    <h3 class="apple-section-title">第4文型（S+V+O1+O2）</h3>
                    <p class="apple-section-text" id="desc-pattern4"></p>
                    
                    <!-- AI生成問題セクション -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generatePattern4Question" class="apple-ai-btn">
                                新しい問題を生成
                            </button>
                        </div>
                        
                        <div id="aiPattern4QuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiPattern4QuestionText" class="apple-question-text"></p>
                                <div id="aiPattern4OptionsContainer" class="apple-options-grid">
                                    <!-- AI生成の選択肢がここに表示されます -->
                                </div>
                                <div id="aiPattern4Feedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        
                        <div id="loadingPattern4Indicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>

                    <h3 class="apple-section-title">第5文型（S+V+O+C）</h3>
                    <p class="apple-section-text" id="desc-pattern5"></p>
                    <!-- AI生成問題セクション -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generatePattern5Question" class="apple-ai-btn">
                                新しい問題を生成
                            </button>
                        </div>
                        <div id="aiPattern5QuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiPattern5QuestionText" class="apple-question-text"></p>
                                <div id="aiPattern5OptionsContainer" class="apple-options-grid">
                                    <!-- AI生成の選択肢がここに表示されます -->
                                </div>
                                <div id="aiPattern5Feedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        <div id="loadingPattern5Indicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 句 -->
            <section id="phrase" class="apple-card mb-8">
                <h2 class="apple-card-title">句</h2>
                <div class="prose max-w-none">
                    <h3 class="apple-section-title">動名詞</h3>
                    <p class="apple-section-text" id="desc-gerund">動詞のing形で名詞の働きをする。</p>
                    
                    <!-- AI生成問題セクション -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generateGerundQuestion" class="apple-ai-btn">
                                新しい問題を生成
                            </button>
                        </div>
                        
                        <div id="aiGerundQuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiGerundQuestionText" class="apple-question-text"></p>
                                <div id="aiGerundOptionsContainer" class="apple-options-grid">
                                    <!-- AI生成の選択肢がここに表示されます -->
                                </div>
                                <div id="aiGerundFeedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        
                        <div id="loadingGerundIndicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>

                    <h3 class="apple-section-title">不定詞</h3>
                    <p class="apple-section-text" id="desc-infinitive">to + 動詞の原形で名詞・形容詞・副詞の働きをする。</p>
                    
                    <!-- AI生成問題セクション -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generateInfinitiveQuestion" class="apple-ai-btn">
                                新しい問題を生成
                            </button>
                        </div>
                        
                        <div id="aiInfinitiveQuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiInfinitiveQuestionText" class="apple-question-text"></p>
                                <div id="aiInfinitiveOptionsContainer" class="apple-options-grid">
                                    <!-- AI生成の選択肢がここに表示されます -->
                                </div>
                                <div id="aiInfinitiveFeedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        
                        <div id="loadingInfinitiveIndicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>

                    <h3 class="apple-section-title">分詞</h3>
                    <p class="apple-section-text" id="desc-participle">現在分詞(-ing)と過去分詞(-ed)で形容詞の働きをする。</p>
                    
                    <!-- AI生成問題セクション -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generateParticipleQuestion" class="apple-ai-btn">
                                新しい問題を生成
                            </button>
                        </div>
                        
                        <div id="aiParticipleQuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiParticipleQuestionText" class="apple-question-text"></p>
                                <div id="aiParticipleOptionsContainer" class="apple-options-grid">
                                    <!-- AI生成の選択肢がここに表示されます -->
                                </div>
                                <div id="aiParticipleFeedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        
                        <div id="loadingParticipleIndicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>

                    <h3 class="apple-section-title">分詞構文</h3>
                    <p class="apple-section-text" id="desc-participle_construction"></p>
                    
                    <!-- AI生成問題セクション -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generateParticipleConstructionQuestion" class="apple-ai-btn">
                                新しい問題を生成
                            </button>
                        </div>
                        
                        <div id="aiParticipleConstructionQuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiParticipleConstructionQuestionText" class="apple-question-text"></p>
                                <div id="aiParticipleConstructionOptionsContainer" class="apple-options-grid">
                                    <!-- AI生成の選択肢がここに表示されます -->
                                </div>
                                <div id="aiParticipleConstructionFeedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        
                        <div id="loadingParticipleConstructionIndicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 節 -->
            <section id="clause" class="apple-card mb-8">
                <h2 class="apple-card-title">節</h2>
                <div class="prose max-w-none">
                    <h3 class="apple-section-title">関係代名詞</h3>
                    <p class="apple-section-text" id="desc-relative_pronoun"></p>
                    
                    <!-- AI生成問題セクション -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generateRelativePronounQuestion" class="apple-ai-btn">
                                新しい問題を生成
                            </button>
                        </div>
                        
                        <div id="aiRelativePronounQuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiRelativePronounQuestionText" class="apple-question-text"></p>
                                <div id="aiRelativePronounOptionsContainer" class="apple-options-grid">
                                    <!-- AI生成の選択肢がここに表示されます -->
                                </div>
                                <div id="aiRelativePronounFeedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        
                        <div id="loadingRelativePronounIndicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>

                    <h3 class="apple-section-title">関係副詞</h3>
                    <p class="apple-section-text" id="desc-relative_adverb"></p>
                    
                    <!-- AI生成問題セクション -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generateRelativeAdverbQuestion" class="apple-ai-btn">
                                新しい問題を生成
                            </button>
                        </div>
                        
                        <div id="aiRelativeAdverbQuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiRelativeAdverbQuestionText" class="apple-question-text"></p>
                                <div id="aiRelativeAdverbOptionsContainer" class="apple-options-grid">
                                    <!-- AI生成の選択肢がここに表示されます -->
                                </div>
                                <div id="aiRelativeAdverbFeedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        
                        <div id="loadingRelativeAdverbIndicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>

                    <h3 class="apple-section-title">従属接続詞</h3>
                    <p class="apple-section-text" id="desc-subordinating_conjunction"></p>
                    
                    <!-- AI生成問題セクション -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generateSubordinatingConjunctionQuestion" class="apple-ai-btn">
                                新しい問題を生成
                            </button>
                        </div>
                        
                        <div id="aiSubordinatingConjunctionQuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiSubordinatingConjunctionQuestionText" class="apple-question-text"></p>
                                <div id="aiSubordinatingConjunctionOptionsContainer" class="apple-options-grid">
                                    <!-- AI生成の選択肢がここに表示されます -->
                                </div>
                                <div id="aiSubordinatingConjunctionFeedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        
                        <div id="loadingSubordinatingConjunctionIndicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>

                    <h3 class="apple-section-title">間接疑問文</h3>
                    <div id="indirect-question-explanation" class="apple-section-text"></div>
                </div>
            </section>

            <!-- 時制 -->
            <section id="tense" class="apple-card mb-8">
                <h2 class="apple-card-title">時制</h2>
                <div class="prose max-w-none">
                    <h3 class="apple-section-title">現在形</h3>
                    <div id="present-tense-explanation" class="apple-section-text"></div>
                    
                    <!-- AI生成問題セクション -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generatePresentTenseQuestion" class="apple-ai-btn">
                                新しい問題を生成
                            </button>
                        </div>
                        
                        <div id="aiPresentTenseQuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiPresentTenseQuestionText" class="apple-question-text"></p>
                                <div id="aiPresentTenseOptionsContainer" class="apple-options-grid">
                                    <!-- AI生成の選択肢がここに表示されます -->
                                </div>
                                <div id="aiPresentTenseFeedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        
                        <div id="loadingPresentTenseIndicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>

                    <h3 class="apple-section-title">過去形</h3>
                    <div id="past-tense-explanation" class="apple-section-text"></div>
                    
                    <!-- AI生成問題セクション -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generatePastTenseQuestion" class="apple-ai-btn">
                                新しい問題を生成
                            </button>
                        </div>
                        
                        <div id="aiPastTenseQuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiPastTenseQuestionText" class="apple-question-text"></p>
                                <div id="aiPastTenseOptionsContainer" class="apple-options-grid">
                                    <!-- AI生成の選択肢がここに表示されます -->
                                </div>
                                <div id="aiPastTenseFeedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        
                        <div id="loadingPastTenseIndicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>

                    <h3 class="apple-section-title">進行形</h3>
                    <p class="apple-section-text" id="desc-progressive"></p>
                    
                    <!-- AI生成問題セクション -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generateProgressiveQuestion" class="apple-ai-btn">
                                新しい問題を生成
                            </button>
                        </div>
                        
                        <div id="aiProgressiveQuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiProgressiveQuestionText" class="apple-question-text"></p>
                                <div id="aiProgressiveOptionsContainer" class="apple-options-grid">
                                    <!-- AI生成の選択肢がここに表示されます -->
                                </div>
                                <div id="aiProgressiveFeedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        
                        <div id="loadingProgressiveIndicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>

                    <h3 class="apple-section-title">現在完了形</h3>
                    <p class="apple-section-text" id="desc-present_perfect"></p>
                    
                    <!-- AI生成問題セクション -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generatePresentPerfectQuestion" class="apple-ai-btn">
                                新しい問題を生成
                            </button>
                        </div>
                        
                        <div id="aiPresentPerfectQuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiPresentPerfectQuestionText" class="apple-question-text"></p>
                                <div id="aiPresentPerfectOptionsContainer" class="apple-options-grid">
                                    <!-- AI生成の選択肢がここに表示されます -->
                                </div>
                                <div id="aiPresentPerfectFeedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        
                        <div id="loadingPresentPerfectIndicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>

                    <h3 class="apple-section-title">過去完了形</h3>
                    <p class="apple-section-text" id="desc-past_perfect"></p>
                    
                    <!-- AI生成問題セクション -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generatePastPerfectQuestion" class="apple-ai-btn">
                                新しい問題を生成
                            </button>
                        </div>
                        
                        <div id="aiPastPerfectQuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiPastPerfectQuestionText" class="apple-question-text"></p>
                                <div id="aiPastPerfectOptionsContainer" class="apple-options-grid">
                                    <!-- AI生成の選択肢がここに表示されます -->
                                </div>
                                <div id="aiPastPerfectFeedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        
                        <div id="loadingPastPerfectIndicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>

                    <h3 class="apple-section-title">未来完了形</h3>
                    <p class="apple-section-text" id="desc-future_perfect"></p>
                    
                    <!-- AI生成問題セクション -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generateFuturePerfectQuestion" class="apple-ai-btn">
                                新しい問題を生成
                            </button>
                        </div>
                        
                        <div id="aiFuturePerfectQuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiFuturePerfectQuestionText" class="apple-question-text"></p>
                                <div id="aiFuturePerfectOptionsContainer" class="apple-options-grid">
                                    <!-- AI生成の選択肢がここに表示されます -->
                                </div>
                                <div id="aiFuturePerfectFeedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        
                        <div id="loadingFuturePerfectIndicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 助動詞 -->
            <section id="modal" class="apple-card mb-8">
                <h2 class="apple-card-title">助動詞</h2>
                <div class="prose max-w-none">
                    <h3 class="apple-section-title">can</h3>
                    <p id="desc-can"></p>
                    <p class="apple-section-text">能力・可能性・許可を表す。</p>
                    <!-- AI生成問題セクション（can） -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generateCanQuestion" class="apple-ai-btn">新しい問題を生成</button>
                        </div>
                        <div id="aiCanQuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiCanQuestionText" class="apple-question-text"></p>
                                <div id="aiCanOptionsContainer" class="apple-options-grid"></div>
                                <div id="aiCanFeedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        <div id="loadingCanIndicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>

                    <h3 class="apple-section-title">will</h3>
                    <p id="desc-will"></p>
                    <p class="apple-section-text">未来の意志・予測・約束を表す。</p>
                    <!-- AI生成問題セクション（will） -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generateWillQuestion" class="apple-ai-btn">新しい問題を生成</button>
                        </div>
                        <div id="aiWillQuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiWillQuestionText" class="apple-question-text"></p>
                                <div id="aiWillOptionsContainer" class="apple-options-grid"></div>
                                <div id="aiWillFeedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        <div id="loadingWillIndicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>

                    <h3 class="apple-section-title">may</h3>
                    <p id="desc-may"></p>
                    <p class="apple-section-text">許可・推量・可能性を表す。</p>
                    <!-- AI生成問題セクション（may） -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generateMayQuestion" class="apple-ai-btn">新しい問題を生成</button>
                        </div>
                        <div id="aiMayQuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiMayQuestionText" class="apple-question-text"></p>
                                <div id="aiMayOptionsContainer" class="apple-options-grid"></div>
                                <div id="aiMayFeedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        <div id="loadingMayIndicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>

                    <h3 class="apple-section-title">must</h3>
                    <p id="desc-must"></p>
                    <p class="apple-section-text">義務・強い推量を表す。</p>
                    <!-- AI生成問題セクション（must） -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generateMustQuestion" class="apple-ai-btn">新しい問題を生成</button>
                        </div>
                        <div id="aiMustQuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiMustQuestionText" class="apple-question-text"></p>
                                <div id="aiMustOptionsContainer" class="apple-options-grid"></div>
                                <div id="aiMustFeedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        <div id="loadingMustIndicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>

                    <h3 class="apple-section-title">should</h3>
                    <p id="desc-should"></p>
                    <p class="apple-section-text">助言・義務・推量を表す。</p>
                    <!-- AI生成問題セクション（should） -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generateShouldQuestion" class="apple-ai-btn">新しい問題を生成</button>
                        </div>
                        <div id="aiShouldQuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiShouldQuestionText" class="apple-question-text"></p>
                                <div id="aiShouldOptionsContainer" class="apple-options-grid"></div>
                                <div id="aiShouldFeedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        <div id="loadingShouldIndicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 仮定法 -->
            <section id="subjunctive" class="apple-card mb-8">
                <h2 class="apple-card-title">仮定法</h2>
                <div class="prose max-w-none">
                    <h3 class="apple-section-title">仮定法過去</h3>
                    <p class="apple-section-text">現在の事実に反する仮定を表す。</p>
                    <p id="desc-subjunctive_past" class="apple-section-text"></p>
                    
                    <!-- AI生成問題セクション -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generateSubjunctivePastQuestion" class="apple-ai-btn">
                                新しい問題を生成
                            </button>
                        </div>
                        
                        <div id="aiSubjunctivePastQuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiSubjunctivePastQuestionText" class="apple-question-text"></p>
                                <div id="aiSubjunctivePastOptionsContainer" class="apple-options-grid">
                                    <!-- AI生成の選択肢がここに表示されます -->
                                </div>
                                <div id="aiSubjunctivePastFeedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        
                        <div id="loadingSubjunctivePastIndicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>

                    <h3 class="apple-section-title">仮定法過去完了</h3>
                    <p class="apple-section-text">過去の事実に反する仮定を表す。</p>
                    <p id="desc-subjunctive_past_perfect" class="apple-section-text"></p>
                    
                    <!-- AI生成問題セクション -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generateSubjunctivePastPerfectQuestion" class="apple-ai-btn">
                                新しい問題を生成
                            </button>
                        </div>
                        
                        <div id="aiSubjunctivePastPerfectQuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiSubjunctivePastPerfectQuestionText" class="apple-question-text"></p>
                                <div id="aiSubjunctivePastPerfectOptionsContainer" class="apple-options-grid">
                                    <!-- AI生成の選択肢がここに表示されます -->
                                </div>
                                <div id="aiSubjunctivePastPerfectFeedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        
                        <div id="loadingSubjunctivePastPerfectIndicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>

                    <h3 class="apple-section-title">仮定法未来</h3>
                    <p class="apple-section-text">未来の可能性が低い仮定を表す。</p>
                    <p id="desc-subjunctive_future" class="apple-section-text"></p>
                    
                    <!-- AI生成問題セクション -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generateSubjunctiveFutureQuestion" class="apple-ai-btn">
                                新しい問題を生成
                            </button>
                        </div>
                        
                        <div id="aiSubjunctiveFutureQuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiSubjunctiveFutureQuestionText" class="apple-question-text"></p>
                                <div id="aiSubjunctiveFutureOptionsContainer" class="apple-options-grid">
                                    <!-- AI生成の選択肢がここに表示されます -->
                                </div>
                                <div id="aiSubjunctiveFutureFeedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        
                        <div id="loadingSubjunctiveFutureIndicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>

                    <h3 class="apple-section-title">仮定法の倒置</h3>
                    <p class="apple-section-text">ifを省略した仮定法の倒置形。</p>
                    <p id="desc-subjunctive_inversion" class="apple-section-text"></p>
                    
                    <!-- AI生成問題セクション -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generateSubjunctiveInversionQuestion" class="apple-ai-btn">
                                新しい問題を生成
                            </button>
                        </div>
                        
                        <div id="aiSubjunctiveInversionQuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiSubjunctiveInversionQuestionText" class="apple-question-text"></p>
                                <div id="aiSubjunctiveInversionOptionsContainer" class="apple-options-grid">
                                    <!-- AI生成の選択肢がここに表示されます -->
                                </div>
                                <div id="aiSubjunctiveInversionFeedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        
                        <div id="loadingSubjunctiveInversionIndicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 比較 -->
            <section id="comparison" class="apple-card mb-8">
                <h2 class="apple-card-title">比較</h2>
                <div class="prose max-w-none">
                    <h3 class="apple-section-title">比較級</h3>
                    <p id="desc-comparative" class="apple-section-text"></p>
                    <p class="apple-section-text">2つのものを比較する形。</p>
                    
                    <!-- AI生成問題セクション -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generateComparativeQuestion" class="apple-ai-btn">
                                新しい問題を生成
                            </button>
                        </div>
                        
                        <div id="aiComparativeQuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiComparativeQuestionText" class="apple-question-text"></p>
                                <div id="aiComparativeOptionsContainer" class="apple-options-grid">
                                    <!-- AI生成の選択肢がここに表示されます -->
                                </div>
                                <div id="aiComparativeFeedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        
                        <div id="loadingComparativeIndicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>

                    <h3 class="apple-section-title">最上級</h3>
                    <p id="desc-superlative" class="apple-section-text"></p>
                    <p class="apple-section-text">3つ以上のものの中で最も〜なものを表す形。</p>
                    
                    <!-- AI生成問題セクション -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generateSuperlativeQuestion" class="apple-ai-btn">
                                新しい問題を生成
                            </button>
                        </div>
                        
                        <div id="aiSuperlativeQuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiSuperlativeQuestionText" class="apple-question-text"></p>
                                <div id="aiSuperlativeOptionsContainer" class="apple-options-grid">
                                    <!-- AI生成の選択肢がここに表示されます -->
                                </div>
                                <div id="aiSuperlativeFeedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        
                        <div id="loadingSuperlativeIndicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>

                    <h3 class="apple-section-title">原級比較</h3>
                    <p id="desc-positive_comparison" class="apple-section-text"></p>
                    <p class="apple-section-text">as...asを使った同等比較の形。</p>
                    
                    <!-- AI生成問題セクション -->
                    <div class="apple-ai-section">
                        <h4 class="apple-ai-title">AI生成問題</h4>
                        <div class="mb-4">
                            <div class="difficulty-selector mb-3">
                                <label class="difficulty-label">難易度を選択：</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn active" data-difficulty="easy">基礎</button>
                                    <button class="difficulty-btn" data-difficulty="medium">標準</button>
                                    <button class="difficulty-btn" data-difficulty="hard">発展</button>
                                </div>
                            </div>
                            <button id="generatePositiveComparisonQuestion" class="apple-ai-btn">
                                新しい問題を生成
                            </button>
                        </div>
                        
                        <div id="aiPositiveComparisonQuestionContainer" class="hidden">
                            <div class="apple-question-card">
                                <p id="aiPositiveComparisonQuestionText" class="apple-question-text"></p>
                                <div id="aiPositiveComparisonOptionsContainer" class="apple-options-grid">
                                    <!-- AI生成の選択肢がここに表示されます -->
                                </div>
                                <div id="aiPositiveComparisonFeedback" class="apple-feedback hidden"></div>
                            </div>
                        </div>
                        
                        <div id="loadingPositiveComparisonIndicator" class="hidden">
                            <div class="apple-loading">
                                <div class="apple-spinner"></div>
                                <p class="apple-loading-text">問題を生成中...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

    </main>
    
    <!-- フッター -->
    <footer class="bg-gray-800 text-white mt-12">
        <div class="container mx-auto px-6 py-4 text-center">
            <p>&copy; 2025 Your English Learning Site. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        // バックエンドAPI設定
        const API_BASE_URL = 'http://localhost:3000';
        
        // 名詞問題生成機能
        async function generateNounQuestion() {
            const generateBtn = document.getElementById('generateNounQuestion');
            const loadingIndicator = document.getElementById('loadingIndicator');
            const aiQuestionContainer = document.getElementById('aiQuestionContainer');
            const difficulty = getSelectedDifficulty('generateNounQuestion');
            
            // ボタンを無効化し、ローディング表示
            generateBtn.disabled = true;
            generateBtn.textContent = '生成中...';
            loadingIndicator.classList.remove('hidden');
            aiQuestionContainer.classList.add('hidden');

            try {
                const response = await fetch(`${API_BASE_URL}/api/generate-question`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        topic: 'noun',
                        difficulty: difficulty
                    })
                });

                if (!response.ok) {
                    throw new Error(`API request failed: ${response.status}`);
                }

                const result = await response.json();
                
                if (!result.success) {
                    throw new Error(result.error || 'Failed to generate question');
                }

                displayAIQuestion(result.data, 'aiQuestionContainer', 'aiQuestionText', 'aiOptionsContainer', 'aiFeedback');

            } catch (error) {
                console.error('Error generating question:', error);
                alert('問題の生成に失敗しました。もう一度お試しください。');
            } finally {
                // UIを元に戻す
                generateBtn.disabled = false;
                generateBtn.textContent = '新しい問題を生成';
                loadingIndicator.classList.add('hidden');
            }
        }

        // 冠詞問題生成機能
        async function generateArticleQuestion() {
            const generateBtn = document.getElementById('generateArticleQuestion');
            const loadingIndicator = document.getElementById('loadingArticleIndicator');
            const aiQuestionContainer = document.getElementById('aiArticleQuestionContainer');
            const difficulty = getSelectedDifficulty('generateArticleQuestion');
            
            generateBtn.disabled = true;
            generateBtn.textContent = '生成中...';
            loadingIndicator.classList.remove('hidden');
            aiQuestionContainer.classList.add('hidden');

            try {
                const response = await fetch(`${API_BASE_URL}/api/generate-question`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        topic: 'article',
                        difficulty: difficulty
                    })
                });

                if (!response.ok) {
                    throw new Error(`API request failed: ${response.status}`);
                }

                const result = await response.json();
                
                if (!result.success) {
                    throw new Error(result.error || 'Failed to generate question');
                }

                displayAIQuestion(result.data, 'aiArticleQuestionContainer', 'aiArticleQuestionText', 'aiArticleOptionsContainer', 'aiArticleFeedback');

            } catch (error) {
                console.error('Error generating question:', error);
                alert('問題の生成に失敗しました。もう一度お試しください。');
            } finally {
                generateBtn.disabled = false;
                generateBtn.textContent = '新しい問題を生成';
                loadingIndicator.classList.add('hidden');
            }
        }

        // be動詞問題生成機能
        async function generateBeVerbQuestion() {
            const generateBtn = document.getElementById('generateBeVerbQuestion');
            const loadingIndicator = document.getElementById('loadingBeVerbIndicator');
            const aiQuestionContainer = document.getElementById('aiBeVerbQuestionContainer');
            const difficulty = getSelectedDifficulty('generateBeVerbQuestion');
            
            generateBtn.disabled = true;
            generateBtn.textContent = '生成中...';
            loadingIndicator.classList.remove('hidden');
            aiQuestionContainer.classList.add('hidden');

            try {
                const response = await fetch(`${API_BASE_URL}/api/generate-question`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        topic: 'be_verb',
                        difficulty: difficulty
                    })
                });

                if (!response.ok) {
                    throw new Error(`API request failed: ${response.status}`);
                }

                const result = await response.json();
                
                if (!result.success) {
                    throw new Error(result.error || 'Failed to generate question');
                }

                displayAIQuestion(result.data, 'aiBeVerbQuestionContainer', 'aiBeVerbQuestionText', 'aiBeVerbOptionsContainer', 'aiBeVerbFeedback');

            } catch (error) {
                console.error('Error generating question:', error);
                alert('問題の生成に失敗しました。もう一度お試しください。');
            } finally {
                generateBtn.disabled = false;
                generateBtn.textContent = '新しい問題を生成';
                loadingIndicator.classList.add('hidden');
            }
        }

        // 一般動詞問題生成機能
        async function generateVerbQuestion() {
            const generateBtn = document.getElementById('generateVerbQuestion');
            const loadingIndicator = document.getElementById('loadingVerbIndicator');
            const aiQuestionContainer = document.getElementById('aiVerbQuestionContainer');
            const difficulty = getSelectedDifficulty('generateVerbQuestion');
            
            generateBtn.disabled = true;
            generateBtn.textContent = '生成中...';
            loadingIndicator.classList.remove('hidden');
            aiQuestionContainer.classList.add('hidden');

            try {
                const response = await fetch(`${API_BASE_URL}/api/generate-question`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        topic: 'verb',
                        difficulty: difficulty
                    })
                });

                if (!response.ok) {
                    throw new Error(`API request failed: ${response.status}`);
                }

                const result = await response.json();
                
                if (!result.success) {
                    throw new Error(result.error || 'Failed to generate question');
                }

                displayAIQuestion(result.data, 'aiVerbQuestionContainer', 'aiVerbQuestionText', 'aiVerbOptionsContainer', 'aiVerbFeedback');

            } catch (error) {
                console.error('Error generating question:', error);
                alert('問題の生成に失敗しました。もう一度お試しください。');
            } finally {
                generateBtn.disabled = false;
                generateBtn.textContent = '新しい問題を生成';
                loadingIndicator.classList.add('hidden');
            }
        }

        // 形容詞問題生成機能
        async function generateAdjectiveQuestion() {
            const generateBtn = document.getElementById('generateAdjectiveQuestion');
            const loadingIndicator = document.getElementById('loadingAdjectiveIndicator');
            const aiQuestionContainer = document.getElementById('aiAdjectiveQuestionContainer');
            const difficulty = getSelectedDifficulty('generateAdjectiveQuestion');
            
            generateBtn.disabled = true;
            generateBtn.textContent = '生成中...';
            loadingIndicator.classList.remove('hidden');
            aiQuestionContainer.classList.add('hidden');

            try {
                const response = await fetch(`${API_BASE_URL}/api/generate-question`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        topic: 'adjective',
                        difficulty: difficulty
                    })
                });

                if (!response.ok) {
                    throw new Error(`API request failed: ${response.status}`);
                }

                const result = await response.json();
                
                if (!result.success) {
                    throw new Error(result.error || 'Failed to generate question');
                }

                displayAIQuestion(result.data, 'aiAdjectiveQuestionContainer', 'aiAdjectiveQuestionText', 'aiAdjectiveOptionsContainer', 'aiAdjectiveFeedback');

            } catch (error) {
                console.error('Error generating question:', error);
                alert('問題の生成に失敗しました。もう一度お試しください。');
            } finally {
                generateBtn.disabled = false;
                generateBtn.textContent = '新しい問題を生成';
                loadingIndicator.classList.add('hidden');
            }
        }

        // 副詞問題生成機能
        async function generateAdverbQuestion() {
            const generateBtn = document.getElementById('generateAdverbQuestion');
            const loadingIndicator = document.getElementById('loadingAdverbIndicator');
            const aiQuestionContainer = document.getElementById('aiAdverbQuestionContainer');
            const difficulty = getSelectedDifficulty('generateAdverbQuestion');
            
            generateBtn.disabled = true;
            generateBtn.textContent = '生成中...';
            loadingIndicator.classList.remove('hidden');
            aiQuestionContainer.classList.add('hidden');

            try {
                const response = await fetch(`${API_BASE_URL}/api/generate-question`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        topic: 'adverb',
                        difficulty: difficulty
                    })
                });

                if (!response.ok) {
                    throw new Error(`API request failed: ${response.status}`);
                }

                const result = await response.json();
                
                if (!result.success) {
                    throw new Error(result.error || 'Failed to generate question');
                }

                displayAIQuestion(result.data, 'aiAdverbQuestionContainer', 'aiAdverbQuestionText', 'aiAdverbOptionsContainer', 'aiAdverbFeedback');

            } catch (error) {
                console.error('Error generating question:', error);
                alert('問題の生成に失敗しました。もう一度お試しください。');
            } finally {
                generateBtn.disabled = false;
                generateBtn.textContent = '新しい問題を生成';
                loadingIndicator.classList.add('hidden');
            }
        }

        // 前置詞問題生成機能
        async function generatePrepositionQuestion() {
            const generateBtn = document.getElementById('generatePrepositionQuestion');
            const loadingIndicator = document.getElementById('loadingPrepositionIndicator');
            const aiQuestionContainer = document.getElementById('aiPrepositionQuestionContainer');
            const difficulty = getSelectedDifficulty('generatePrepositionQuestion');
            
            generateBtn.disabled = true;
            generateBtn.textContent = '生成中...';
            loadingIndicator.classList.remove('hidden');
            aiQuestionContainer.classList.add('hidden');

            try {
                const response = await fetch(`${API_BASE_URL}/api/generate-question`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        topic: 'preposition',
                        difficulty: difficulty
                    })
                });

                if (!response.ok) {
                    throw new Error(`API request failed: ${response.status}`);
                }

                const result = await response.json();
                
                if (!result.success) {
                    throw new Error(result.error || 'Failed to generate question');
                }

                displayAIQuestion(result.data, 'aiPrepositionQuestionContainer', 'aiPrepositionQuestionText', 'aiPrepositionOptionsContainer', 'aiPrepositionFeedback');

            } catch (error) {
                console.error('Error generating question:', error);
                alert('問題の生成に失敗しました。もう一度お試しください。');
            } finally {
                generateBtn.disabled = false;
                generateBtn.textContent = '新しい問題を生成';
                loadingIndicator.classList.add('hidden');
            }
        }

        // 接続詞問題生成機能
        async function generateConjunctionQuestion() {
            const generateBtn = document.getElementById('generateConjunctionQuestion');
            const loadingIndicator = document.getElementById('loadingConjunctionIndicator');
            const aiQuestionContainer = document.getElementById('aiConjunctionQuestionContainer');
            const difficulty = getSelectedDifficulty('generateConjunctionQuestion');
            
            generateBtn.disabled = true;
            generateBtn.textContent = '生成中...';
            loadingIndicator.classList.remove('hidden');
            aiQuestionContainer.classList.add('hidden');

            try {
                const response = await fetch(`${API_BASE_URL}/api/generate-question`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        topic: 'conjunction',
                        difficulty: difficulty
                    })
                });

                if (!response.ok) {
                    throw new Error(`API request failed: ${response.status}`);
                }

                const result = await response.json();
                
                if (!result.success) {
                    throw new Error(result.error || 'Failed to generate question');
                }

                displayAIQuestion(result.data, 'aiConjunctionQuestionContainer', 'aiConjunctionQuestionText', 'aiConjunctionOptionsContainer', 'aiConjunctionFeedback');

            } catch (error) {
                console.error('Error generating question:', error);
                alert('問題の生成に失敗しました。もう一度お試しください。');
            } finally {
                generateBtn.disabled = false;
                generateBtn.textContent = '新しい問題を生成';
                loadingIndicator.classList.add('hidden');
            }
        }

        // 句の問題生成機能
        async function generateNounPhraseQuestion() {
            const difficulty = getSelectedDifficulty('generateNounPhraseQuestion');
            await generateQuestionForTopic('noun_phrase', 'generateNounPhraseQuestion', 'loadingNounPhraseIndicator', 'aiNounPhraseQuestionContainer', 'aiNounPhraseQuestionText', 'aiNounPhraseOptionsContainer', 'aiNounPhraseFeedback', difficulty);
        }

        // 節の問題生成機能
        async function generateRelativePronounQuestion() {
            const difficulty = getSelectedDifficulty('generateRelativePronounQuestion');
            await generateQuestionForTopic('relative_pronoun', 'generateRelativePronounQuestion', 'loadingRelativePronounIndicator', 'aiRelativePronounQuestionContainer', 'aiRelativePronounQuestionText', 'aiRelativePronounOptionsContainer', 'aiRelativePronounFeedback', difficulty);
        }

        // 時制の問題生成機能
        async function generatePresentTenseQuestion() {
            const difficulty = getSelectedDifficulty('generatePresentTenseQuestion');
            await generateQuestionForTopic('present_tense', 'generatePresentTenseQuestion', 'loadingPresentTenseIndicator', 'aiPresentTenseQuestionContainer', 'aiPresentTenseQuestionText', 'aiPresentTenseOptionsContainer', 'aiPresentTenseFeedback', difficulty);
        }

        // 助動詞の問題生成機能
        async function generateCanQuestion() {
            const difficulty = getSelectedDifficulty('generateCanQuestion');
            await generateQuestionForTopic('can', 'generateCanQuestion', 'loadingCanIndicator', 'aiCanQuestionContainer', 'aiCanQuestionText', 'aiCanOptionsContainer', 'aiCanFeedback', difficulty);
        }

        // 仮定法の問題生成機能
        async function generateSubjunctivePastQuestion() {
            const difficulty = getSelectedDifficulty('generateSubjunctivePastQuestion');
            await generateQuestionForTopic('subjunctive_past', 'generateSubjunctivePastQuestion', 'loadingSubjunctivePastIndicator', 'aiSubjunctivePastQuestionContainer', 'aiSubjunctivePastQuestionText', 'aiSubjunctivePastOptionsContainer', 'aiSubjunctivePastFeedback', difficulty);
        }

        // 比較の問題生成機能
        async function generateComparativeQuestion() {
            const difficulty = getSelectedDifficulty('generateComparativeQuestion');
            await generateQuestionForTopic('comparative', 'generateComparativeQuestion', 'loadingComparativeIndicator', 'aiComparativeQuestionContainer', 'aiComparativeQuestionText', 'aiComparativeOptionsContainer', 'aiComparativeFeedback', difficulty);
        }

        // AI生成問題を表示（汎用関数）
        function displayAIQuestion(questionData, containerId, questionTextId, optionsContainerId, feedbackId) {
            const aiQuestionContainer = document.getElementById(containerId);
            const aiQuestionText = document.getElementById(questionTextId);
            const aiOptionsContainer = document.getElementById(optionsContainerId);
            const aiFeedback = document.getElementById(feedbackId);

            // 既存の.exam-infoを削除
            const oldExamInfos = aiQuestionText.parentNode.querySelectorAll('.exam-info');
            oldExamInfos.forEach(el => el.remove());

            // 問題文を設定
            aiQuestionText.textContent = questionData.question;

            // 難易度と試験タイプの情報を追加（存在する場合）
            if (questionData.difficulty || questionData.exam_type) {
                const examInfo = document.createElement('div');
                examInfo.className = 'exam-info mb-3 text-sm text-gray-600';
                let infoText = '';
                if (questionData.difficulty) {
                    infoText += `難易度: ${questionData.difficulty}`;
                }
                if (questionData.exam_type) {
                    if (infoText) infoText += ' | ';
                    infoText += `対象: ${questionData.exam_type}`;
                }
                examInfo.textContent = infoText;
                aiQuestionText.parentNode.insertBefore(examInfo, aiQuestionText.nextSibling);
            }

            // 選択肢を生成
            aiOptionsContainer.innerHTML = '';
            questionData.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'apple-option-btn';
                button.textContent = option.text;
                button.dataset.correct = option.correct.toString();
                button.dataset.index = index;
                aiOptionsContainer.appendChild(button);
            });

            // フィードバック要素を設定
            aiFeedback.dataset.explanation = questionData.explanation;
            aiFeedback.classList.add('hidden');
            aiFeedback.classList.remove('correct', 'incorrect');

            // コンテナを表示
            aiQuestionContainer.classList.remove('hidden');

            // イベントリスナーを設定
            setupAIQuestionEventListeners(containerId);
        }

        // AI問題のイベントリスナーを設定（汎用関数）
        function setupAIQuestionEventListeners(containerId) {
            const aiQuestionContainer = document.getElementById(containerId);
            const options = aiQuestionContainer.querySelectorAll('.apple-option-btn');
            const feedbackEl = aiQuestionContainer.querySelector('.apple-feedback');
            const explanation = feedbackEl.dataset.explanation;

            options.forEach(option => {
                option.addEventListener('click', function() {
                    if (aiQuestionContainer.dataset.answered === 'true') return;
                    aiQuestionContainer.dataset.answered = 'true';

                    const isCorrect = this.dataset.correct === 'true';

                    options.forEach(btn => {
                        btn.disabled = true;
                        btn.style.pointerEvents = 'none';
                    });

                    if (isCorrect) {
                        this.classList.add('correct');
                        feedbackEl.innerHTML = `<strong>正解！🎉</strong><br><div class="mt-2">${explanation}</div>`;
                        feedbackEl.classList.remove('hidden');
                        feedbackEl.classList.add('correct');
                    } else {
                        this.classList.add('incorrect');
                        feedbackEl.innerHTML = `<strong>残念！不正解です。</strong><br><div class="mt-2">${explanation}</div>`;
                        feedbackEl.classList.remove('hidden');
                        feedbackEl.classList.add('incorrect');
                        
                        options.forEach(btn => {
                            if (btn.dataset.correct === 'true') {
                                btn.classList.add('correct');
                            }
                        });
                    }
                });
            });
        }

        // サーバーの状態をチェック
        async function checkServerHealth() {
            try {
                const response = await fetch(`${API_BASE_URL}/health`);
                if (response.ok) {
                    console.log('Backend server is running');
                    return true;
                }
            } catch (error) {
                console.error('Backend server is not available:', error);
                return false;
            }
        }

        // 汎用AI問題生成関数（難易度対応版）
        async function generateQuestionForTopic(topic, generateBtnId, loadingIndicatorId, containerId, questionTextId, optionsContainerId, feedbackId, difficulty) {
            const generateBtn = document.getElementById(generateBtnId);
            const loadingIndicator = document.getElementById(loadingIndicatorId);
            const aiQuestionContainer = document.getElementById(containerId);

            generateBtn.disabled = true;
            generateBtn.textContent = '生成中...';
            loadingIndicator.classList.remove('hidden');
            aiQuestionContainer.classList.add('hidden');

            try {
                const response = await fetch(`${API_BASE_URL}/api/generate-question`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        topic: topic,
                        difficulty: difficulty
                    })
                });

                if (!response.ok) {
                    throw new Error(`API request failed: ${response.status}`);
                }

                const result = await response.json();

                if (!result.success) {
                    throw new Error(result.error || 'Failed to generate question');
                }

                displayAIQuestion(result.data, containerId, questionTextId, optionsContainerId, feedbackId);

            } catch (error) {
                console.error('Error generating question:', error);
                alert('問題の生成に失敗しました。もう一度お試しください。');
            } finally {
                generateBtn.disabled = false;
                generateBtn.textContent = '新しい問題を生成';
                loadingIndicator.classList.add('hidden');
            }
        }

        // 文型の問題生成機能
        async function generatePattern1Question() {
            const difficulty = getSelectedDifficulty('generatePattern1Question');
            await generateQuestionForTopic('pattern1', 'generatePattern1Question', 'loadingPattern1Indicator', 'aiPattern1QuestionContainer', 'aiPattern1QuestionText', 'aiPattern1OptionsContainer', 'aiPattern1Feedback', difficulty);
        }

        async function generatePattern2Question() {
            const difficulty = getSelectedDifficulty('generatePattern2Question');
            await generateQuestionForTopic('pattern2', 'generatePattern2Question', 'loadingPattern2Indicator', 'aiPattern2QuestionContainer', 'aiPattern2QuestionText', 'aiPattern2OptionsContainer', 'aiPattern2Feedback', difficulty);
        }

        async function generatePattern3Question() {
            const difficulty = getSelectedDifficulty('generatePattern3Question');
            await generateQuestionForTopic('pattern3', 'generatePattern3Question', 'loadingPattern3Indicator', 'aiPattern3QuestionContainer', 'aiPattern3QuestionText', 'aiPattern3OptionsContainer', 'aiPattern3Feedback', difficulty);
        }

        async function generatePattern4Question() {
            const difficulty = getSelectedDifficulty('generatePattern4Question');
            await generateQuestionForTopic('pattern4', 'generatePattern4Question', 'loadingPattern4Indicator', 'aiPattern4QuestionContainer', 'aiPattern4QuestionText', 'aiPattern4OptionsContainer', 'aiPattern4Feedback', difficulty);
        }

        async function generatePattern5Question() {
            const difficulty = getSelectedDifficulty('generatePattern5Question');
            await generateQuestionForTopic('pattern5', 'generatePattern5Question', 'loadingPattern5Indicator', 'aiPattern5QuestionContainer', 'aiPattern5QuestionText', 'aiPattern5OptionsContainer', 'aiPattern5Feedback', difficulty);
        }

        // 選択された難易度を取得する関数
        function getSelectedDifficulty(generateBtnId) {
            const generateBtn = document.getElementById(generateBtnId);
            const difficultySelector = generateBtn.closest('.apple-ai-section').querySelector('.difficulty-selector');
            const activeBtn = difficultySelector.querySelector('.difficulty-btn.active');
            return activeBtn ? activeBtn.dataset.difficulty : 'medium';
        }

        // 難易度選択ボタンのイベントリスナーを設定
        function setupDifficultySelectors() {
            const difficultySelectors = document.querySelectorAll('.difficulty-selector');
            
            difficultySelectors.forEach(selector => {
                const buttons = selector.querySelectorAll('.difficulty-btn');
                
                buttons.forEach(button => {
                    button.addEventListener('click', function() {
                        // 同じセクション内の他のボタンからactiveクラスを削除
                        buttons.forEach(btn => btn.classList.remove('active'));
                        // クリックされたボタンにactiveクラスを追加
                        this.classList.add('active');
                    });
                });
            });
        }

        document.addEventListener('DOMContentLoaded', function() {
            // サーバーの状態をチェック
            checkServerHealth();

            // 難易度選択機能を初期化
            setupDifficultySelectors();

            // 既存の静的問題のイベントリスナー
            const questionItems = document.querySelectorAll('.question-item:not(#aiQuestionContainer .question-item)');

            questionItems.forEach(question => {
                const options = question.querySelectorAll('.option-btn');
                const feedbackEl = question.querySelector('.feedback');
                const explanation = feedbackEl.dataset.explanation;

                options.forEach(option => {
                    option.addEventListener('click', function() {
                        if (question.dataset.answered === 'true') return;
                        question.dataset.answered = 'true';

                        const isCorrect = this.dataset.correct === 'true';

                        options.forEach(btn => {
                            btn.disabled = true;
                            btn.style.pointerEvents = 'none';
                        });

                        if (isCorrect) {
                            this.classList.add('correct');
                            feedbackEl.innerHTML = `<strong>正解！🎉</strong><br>${explanation}`;
                            feedbackEl.classList.remove('hidden');
                            feedbackEl.classList.add('correct');
                        } else {
                            this.classList.add('incorrect');
                            feedbackEl.innerHTML = `<strong>残念！不正解です。</strong><br>${explanation}`;
                            feedbackEl.classList.remove('hidden');
                            feedbackEl.classList.add('incorrect');
                            
                            options.forEach(btn => {
                                if (btn.dataset.correct === 'true') {
                                    btn.classList.add('correct');
                                }
                            });
                        }
                    });
                });
            });

            // AI問題生成ボタンのイベントリスナー
            const generateNounBtn = document.getElementById('generateNounQuestion');
            if (generateNounBtn) {
                generateNounBtn.addEventListener('click', generateNounQuestion);
            }

            const generateArticleBtn = document.getElementById('generateArticleQuestion');
            if (generateArticleBtn) {
                generateArticleBtn.addEventListener('click', generateArticleQuestion);
            }

            const generateBeVerbBtn = document.getElementById('generateBeVerbQuestion');
            if (generateBeVerbBtn) {
                generateBeVerbBtn.addEventListener('click', generateBeVerbQuestion);
            }

            const generateVerbBtn = document.getElementById('generateVerbQuestion');
            if (generateVerbBtn) {
                generateVerbBtn.addEventListener('click', generateVerbQuestion);
            }

            const generateAdjectiveBtn = document.getElementById('generateAdjectiveQuestion');
            if (generateAdjectiveBtn) {
                generateAdjectiveBtn.addEventListener('click', generateAdjectiveQuestion);
            }

            const generateAdverbBtn = document.getElementById('generateAdverbQuestion');
            if (generateAdverbBtn) {
                generateAdverbBtn.addEventListener('click', generateAdverbQuestion);
            }

            const generatePrepositionBtn = document.getElementById('generatePrepositionQuestion');
            if (generatePrepositionBtn) {
                generatePrepositionBtn.addEventListener('click', generatePrepositionQuestion);
            }

            const generateConjunctionBtn = document.getElementById('generateConjunctionQuestion');
            if (generateConjunctionBtn) {
                generateConjunctionBtn.addEventListener('click', generateConjunctionQuestion);
            }

            const generatePattern1Btn = document.getElementById('generatePattern1Question');
            if (generatePattern1Btn) {
                generatePattern1Btn.addEventListener('click', generatePattern1Question);
            }

            const generatePattern2Btn = document.getElementById('generatePattern2Question');
            if (generatePattern2Btn) {
                generatePattern2Btn.addEventListener('click', generatePattern2Question);
            }

            const generatePattern3Btn = document.getElementById('generatePattern3Question');
            if (generatePattern3Btn) {
                generatePattern3Btn.addEventListener('click', generatePattern3Question);
            }

            const generatePattern4Btn = document.getElementById('generatePattern4Question');
            if (generatePattern4Btn) {
                generatePattern4Btn.addEventListener('click', generatePattern4Question);
            }

            const generatePattern5Btn = document.getElementById('generatePattern5Question');
            if (generatePattern5Btn) {
                generatePattern5Btn.addEventListener('click', generatePattern5Question);
            }

            const generateNounPhraseBtn = document.getElementById('generateNounPhraseQuestion');
            if (generateNounPhraseBtn) {
                generateNounPhraseBtn.addEventListener('click', generateNounPhraseQuestion);
            }

            const generateRelativePronounBtn = document.getElementById('generateRelativePronounQuestion');
            if (generateRelativePronounBtn) {
                generateRelativePronounBtn.addEventListener('click', generateRelativePronounQuestion);
            }

            const generatePresentTenseBtn = document.getElementById('generatePresentTenseQuestion');
            if (generatePresentTenseBtn) {
                generatePresentTenseBtn.addEventListener('click', generatePresentTenseQuestion);
            }

            const generatePastTenseBtn = document.getElementById('generatePastTenseQuestion');
            if (generatePastTenseBtn) {
                generatePastTenseBtn.addEventListener('click', generatePastTenseQuestion);
            }

            const generateProgressiveBtn = document.getElementById('generateProgressiveQuestion');
            if (generateProgressiveBtn) {
                generateProgressiveBtn.addEventListener('click', generateProgressiveQuestion);
            }

            const generatePresentPerfectBtn = document.getElementById('generatePresentPerfectQuestion');
            if (generatePresentPerfectBtn) {
                generatePresentPerfectBtn.addEventListener('click', generatePresentPerfectQuestion);
            }

            const generatePastPerfectBtn = document.getElementById('generatePastPerfectQuestion');
            if (generatePastPerfectBtn) {
                generatePastPerfectBtn.addEventListener('click', generatePastPerfectQuestion);
            }

            const generateFuturePerfectBtn = document.getElementById('generateFuturePerfectQuestion');
            if (generateFuturePerfectBtn) {
                generateFuturePerfectBtn.addEventListener('click', generateFuturePerfectQuestion);
            }

            const generateCanBtn = document.getElementById('generateCanQuestion');
            if (generateCanBtn) {
                generateCanBtn.addEventListener('click', generateCanQuestion);
            }

            const generateSubjunctivePastBtn = document.getElementById('generateSubjunctivePastQuestion');
            if (generateSubjunctivePastBtn) {
                generateSubjunctivePastBtn.addEventListener('click', generateSubjunctivePastQuestion);
            }

            const generateSubjunctivePastPerfectBtn = document.getElementById('generateSubjunctivePastPerfectQuestion');
            if (generateSubjunctivePastPerfectBtn) {
                generateSubjunctivePastPerfectBtn.addEventListener('click', generateSubjunctivePastPerfectQuestion);
            }

            const generateSubjunctiveFutureBtn = document.getElementById('generateSubjunctiveFutureQuestion');
            if (generateSubjunctiveFutureBtn) {
                generateSubjunctiveFutureBtn.addEventListener('click', generateSubjunctiveFutureQuestion);
            }

            const generateSubjunctiveInversionBtn = document.getElementById('generateSubjunctiveInversionQuestion');
            if (generateSubjunctiveInversionBtn) {
                generateSubjunctiveInversionBtn.addEventListener('click', generateSubjunctiveInversionQuestion);
            }

            const generateComparativeBtn = document.getElementById('generateComparativeQuestion');
            if (generateComparativeBtn) {
                generateComparativeBtn.addEventListener('click', generateComparativeQuestion);
            }

            const generateGerundBtn = document.getElementById('generateGerundQuestion');
            if (generateGerundBtn) {
                generateGerundBtn.addEventListener('click', generateGerundQuestion);
            }

            const generateInfinitiveBtn = document.getElementById('generateInfinitiveQuestion');
            if (generateInfinitiveBtn) {
                generateInfinitiveBtn.addEventListener('click', generateInfinitiveQuestion);
            }

            const generateParticipleBtn = document.getElementById('generateParticipleQuestion');
            if (generateParticipleBtn) {
                generateParticipleBtn.addEventListener('click', generateParticipleQuestion);
            }

            const generateParticipleConstructionBtn = document.getElementById('generateParticipleConstructionQuestion');
            if (generateParticipleConstructionBtn) {
                generateParticipleConstructionBtn.addEventListener('click', generateParticipleConstructionQuestion);
            }

            const generateRelativeAdverbBtn = document.getElementById('generateRelativeAdverbQuestion');
            if (generateRelativeAdverbBtn) {
                generateRelativeAdverbBtn.addEventListener('click', generateRelativeAdverbQuestion);
            }

            const generateSubordinatingConjunctionBtn = document.getElementById('generateSubordinatingConjunctionQuestion');
            if (generateSubordinatingConjunctionBtn) {
                generateSubordinatingConjunctionBtn.addEventListener('click', generateSubordinatingConjunctionQuestion);
            }

            const generateIndirectQuestionBtn = document.getElementById('generateIndirectQuestionQuestion');
            if (generateIndirectQuestionBtn) {
                generateIndirectQuestionBtn.addEventListener('click', generateIndirectQuestionQuestion);
            }
        });

        // 文法説明をJSONから読み込んで表示
        fetch('grammar.json')
          .then(res => res.json())
          .then(data => {
            document.getElementById('desc-noun').innerHTML = data.noun.replace(/\n/g, '<br>');
            document.getElementById('desc-article').innerHTML = data.article.replace(/\n/g, '<br>');
            document.getElementById('desc-be_verb').innerHTML = data.be_verb.replace(/\n/g, '<br>');
            document.getElementById('desc-verb').innerHTML = data.verb.replace(/\n/g, '<br>');
            document.getElementById('desc-adjective').innerHTML = data.adjective.replace(/\n/g, '<br>');
            document.getElementById('desc-adverb').innerHTML = data.adverb.replace(/\n/g, '<br>');
            document.getElementById('desc-preposition').innerHTML = data.preposition.replace(/\n/g, '<br>');
            document.getElementById('desc-conjunction').innerHTML = data.conjunction.replace(/\n/g, '<br>');
            document.getElementById('desc-pattern1').innerHTML = data.pattern_1.replace(/\n/g, '<br>');
            document.getElementById('desc-pattern2').innerHTML = data.pattern_2.replace(/\n/g, '<br>');
            document.getElementById('desc-pattern3').innerHTML = data.pattern_3.replace(/\n/g, '<br>');
            document.getElementById('desc-pattern4').innerHTML = data.pattern_4.replace(/\n/g, '<br>');
            document.getElementById('desc-pattern5').innerHTML = data.pattern_5.replace(/\n/g, '<br>');
            document.getElementById('desc-gerund').innerHTML = data.gerund.replace(/\n/g, '<br>');
            document.getElementById('desc-infinitive').innerHTML = data.infinitive.replace(/\n/g, '<br>');
            document.getElementById('desc-participle').innerHTML = data.participle.replace(/\n/g, '<br>');
            document.getElementById('desc-participle_construction').innerHTML = data.participle_construction.replace(/\n/g, '<br>');
            document.getElementById('desc-relative_pronoun').innerHTML = data.relative_pronoun.replace(/\n/g, '<br>');
            document.getElementById('desc-relative_adverb').innerHTML = data.relative_adverb.replace(/\n/g, '<br>');
            document.getElementById('desc-subordinating_conjunction').innerHTML = data.subordinating_conjunction.replace(/\n/g, '<br>');
            document.getElementById('indirect-question-explanation').innerHTML = data.indirect_question.replace(/\n/g, '<br>');
            document.getElementById('present-tense-explanation').innerHTML = data.present_tense.replace(/\n/g, '<br>');
            document.getElementById('past-tense-explanation').innerHTML = data.past_tense.replace(/\n/g, '<br>');
            document.getElementById('desc-progressive').innerHTML = data.progressive.replace(/\n/g, '<br>');
            document.getElementById('desc-present_perfect').innerHTML = data.present_perfect.replace(/\n/g, '<br>');
            document.getElementById('desc-past_perfect').innerHTML = data.past_perfect.replace(/\n/g, '<br>');
            document.getElementById('desc-future_perfect').innerHTML = data.future_perfect.replace(/\n/g, '<br>');
            document.getElementById('desc-can').innerHTML = data.modal_can.replace(/\n/g, '<br>');
            document.getElementById('desc-will').innerHTML = data.modal_will.replace(/\n/g, '<br>');
            document.getElementById('desc-may').innerHTML = data.modal_may.replace(/\n/g, '<br>');
            document.getElementById('desc-must').innerHTML = data.modal_must.replace(/\n/g, '<br>');
            document.getElementById('desc-should').innerHTML = data.modal_should.replace(/\n/g, '<br>');
            document.getElementById('desc-subjunctive_past').innerHTML = data.subjunctive_past.replace(/\n/g, '<br>');
            document.getElementById('desc-subjunctive_past_perfect').innerHTML = data.subjunctive_past_perfect.replace(/\n/g, '<br>');
            document.getElementById('desc-subjunctive_future').innerHTML = data.subjunctive_future.replace(/\n/g, '<br>');
            document.getElementById('desc-subjunctive_inversion').innerHTML = data.subjunctive_inversion.replace(/\n/g, '<br>');
            document.getElementById('desc-comparative').innerHTML = data.comparative.replace(/\n/g, '<br>');
            document.getElementById('desc-superlative').innerHTML = data.superlative.replace(/\n/g, '<br>');
            document.getElementById('desc-positive_comparison').innerHTML = data.positive_comparison.replace(/\n/g, '<br>');
        });

        async function generateGerundQuestion() {
            const difficulty = getSelectedDifficulty('generateGerundQuestion');
            await generateQuestionForTopic('gerund', 'generateGerundQuestion', 'loadingGerundIndicator', 'aiGerundQuestionContainer', 'aiGerundQuestionText', 'aiGerundOptionsContainer', 'aiGerundFeedback', difficulty);
        }
        async function generateInfinitiveQuestion() {
            const difficulty = getSelectedDifficulty('generateInfinitiveQuestion');
            await generateQuestionForTopic('infinitive', 'generateInfinitiveQuestion', 'loadingInfinitiveIndicator', 'aiInfinitiveQuestionContainer', 'aiInfinitiveQuestionText', 'aiInfinitiveOptionsContainer', 'aiInfinitiveFeedback', difficulty);
        }
        async function generateParticipleQuestion() {
            const difficulty = getSelectedDifficulty('generateParticipleQuestion');
            await generateQuestionForTopic('participle', 'generateParticipleQuestion', 'loadingParticipleIndicator', 'aiParticipleQuestionContainer', 'aiParticipleQuestionText', 'aiParticipleOptionsContainer', 'aiParticipleFeedback', difficulty);
        }
        async function generateParticipleConstructionQuestion() {
            const difficulty = getSelectedDifficulty('generateParticipleConstructionQuestion');
            await generateQuestionForTopic('participle_construction', 'generateParticipleConstructionQuestion', 'loadingParticipleConstructionIndicator', 'aiParticipleConstructionQuestionContainer', 'aiParticipleConstructionQuestionText', 'aiParticipleConstructionOptionsContainer', 'aiParticipleConstructionFeedback', difficulty);
        }
        async function generateRelativeAdverbQuestion() {
            const difficulty = getSelectedDifficulty('generateRelativeAdverbQuestion');
            await generateQuestionForTopic('relative_adverb', 'generateRelativeAdverbQuestion', 'loadingRelativeAdverbIndicator', 'aiRelativeAdverbQuestionContainer', 'aiRelativeAdverbQuestionText', 'aiRelativeAdverbOptionsContainer', 'aiRelativeAdverbFeedback', difficulty);
        }
        async function generateSubordinatingConjunctionQuestion() {
            const difficulty = getSelectedDifficulty('generateSubordinatingConjunctionQuestion');
            await generateQuestionForTopic('subordinating_conjunction', 'generateSubordinatingConjunctionQuestion', 'loadingSubordinatingConjunctionIndicator', 'aiSubordinatingConjunctionQuestionContainer', 'aiSubordinatingConjunctionQuestionText', 'aiSubordinatingConjunctionOptionsContainer', 'aiSubordinatingConjunctionFeedback', difficulty);
        }
        async function generateIndirectQuestionQuestion() {
            const difficulty = getSelectedDifficulty('generateIndirectQuestionQuestion');
            await generateQuestionForTopic('indirect_question', 'generateIndirectQuestionQuestion', 'loadingIndirectQuestionIndicator', 'aiIndirectQuestionQuestionContainer', 'aiIndirectQuestionQuestionText', 'aiIndirectQuestionOptionsContainer', 'aiIndirectQuestionFeedback', difficulty);
        }
        async function generatePastTenseQuestion() {
            const difficulty = getSelectedDifficulty('generatePastTenseQuestion');
            await generateQuestionForTopic('past_tense', 'generatePastTenseQuestion', 'loadingPastTenseIndicator', 'aiPastTenseQuestionContainer', 'aiPastTenseQuestionText', 'aiPastTenseOptionsContainer', 'aiPastTenseFeedback', difficulty);
        }
        async function generateProgressiveQuestion() {
            const difficulty = getSelectedDifficulty('generateProgressiveQuestion');
            await generateQuestionForTopic('progressive', 'generateProgressiveQuestion', 'loadingProgressiveIndicator', 'aiProgressiveQuestionContainer', 'aiProgressiveQuestionText', 'aiProgressiveOptionsContainer', 'aiProgressiveFeedback', difficulty);
        }
        async function generatePresentPerfectQuestion() {
            const difficulty = getSelectedDifficulty('generatePresentPerfectQuestion');
            await generateQuestionForTopic('present_perfect', 'generatePresentPerfectQuestion', 'loadingPresentPerfectIndicator', 'aiPresentPerfectQuestionContainer', 'aiPresentPerfectQuestionText', 'aiPresentPerfectOptionsContainer', 'aiPresentPerfectFeedback', difficulty);
        }
        async function generatePastPerfectQuestion() {
            const difficulty = getSelectedDifficulty('generatePastPerfectQuestion');
            await generateQuestionForTopic('past_perfect', 'generatePastPerfectQuestion', 'loadingPastPerfectIndicator', 'aiPastPerfectQuestionContainer', 'aiPastPerfectQuestionText', 'aiPastPerfectOptionsContainer', 'aiPastPerfectFeedback', difficulty);
        }
        async function generateFuturePerfectQuestion() {
            const difficulty = getSelectedDifficulty('generateFuturePerfectQuestion');
            await generateQuestionForTopic('future_perfect', 'generateFuturePerfectQuestion', 'loadingFuturePerfectIndicator', 'aiFuturePerfectQuestionContainer', 'aiFuturePerfectQuestionText', 'aiFuturePerfectOptionsContainer', 'aiFuturePerfectFeedback', difficulty);
        }
        async function generateSubjunctivePastPerfectQuestion() {
            const difficulty = getSelectedDifficulty('generateSubjunctivePastPerfectQuestion');
            await generateQuestionForTopic('subjunctive_past_perfect', 'generateSubjunctivePastPerfectQuestion', 'loadingSubjunctivePastPerfectIndicator', 'aiSubjunctivePastPerfectQuestionContainer', 'aiSubjunctivePastPerfectQuestionText', 'aiSubjunctivePastPerfectOptionsContainer', 'aiSubjunctivePastPerfectFeedback', difficulty);
        }
        async function generateSubjunctiveFutureQuestion() {
            const difficulty = getSelectedDifficulty('generateSubjunctiveFutureQuestion');
            await generateQuestionForTopic('subjunctive_future', 'generateSubjunctiveFutureQuestion', 'loadingSubjunctiveFutureIndicator', 'aiSubjunctiveFutureQuestionContainer', 'aiSubjunctiveFutureQuestionText', 'aiSubjunctiveFutureOptionsContainer', 'aiSubjunctiveFutureFeedback', difficulty);
        }
        async function generateSubjunctiveInversionQuestion() {
            const difficulty = getSelectedDifficulty('generateSubjunctiveInversionQuestion');
            await generateQuestionForTopic('subjunctive_inversion', 'generateSubjunctiveInversionQuestion', 'loadingSubjunctiveInversionIndicator', 'aiSubjunctiveInversionQuestionContainer', 'aiSubjunctiveInversionQuestionText', 'aiSubjunctiveInversionOptionsContainer', 'aiSubjunctiveInversionFeedback', difficulty);
        }
    </script>

</body>
</html>